I've already built a production-ready Debian lightweight proxy script that does exactly what you need. It transparently forwards traffic on custom ports (IPv4/IPv6) to your target server and redirects everything else with HTTP 302 to your domain. The solution is idempotent, uses only Debian-stable packages (iptables + nginx-light), persists across reboots via systemd, and includes rollback. Check my working implementation: https://github.com/eazybusiness/debian-lightweight-proxy
